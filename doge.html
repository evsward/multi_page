<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>深度普拉提</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim 和 Respond.js 是为了让 IE8 支持 HTML5 元素和媒体查询（media queries）功能 -->
    <!-- 警告：通过 file:// 协议（就是直接将 html 页面拖拽到浏览器中）访问页面时 Respond.js 不起作用 -->
    <!--[if lt IE 9]>
      <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
    <![endif]-->
</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-6">
                <h1 id="Ddate" title="对上个月进行结算"></h1>
                <div class="form-group form-inline">
                    <button onclick="instructor('Ava',1);" type="button" class="btn btn-primary">Ava</button>
                    <button onclick="instructor('Miranda',1);" type="button" class="btn btn-success">Miranda</button>
                    <button onclick="instructor('Jessie',1);" type="button" class="btn btn-info">Jessie</button>
                </div>
                <div class="form-group form-inline">
                    <button onclick="instructor('Charles',2);" type="button"
                        class="btn btn-warning">Charles（初级）</button>
                </div>
                <div class="form-group form-inline">
                    <label class="sr-only" for="D400p">Amount</label>
                    <div class="input-group">
                        <div class="input-group-addon">400 私教</div>
                        <input type="text" value="3" class="form-control" id="D400p" placeholder="课数">
                        <div class="input-group-addon">节</div>
                    </div>
                </div>
                <div class="form-group form-inline">
                    <label class="sr-only" for="D500p">Amount</label>
                    <div class="input-group">
                        <div class="input-group-addon">500 私教</div>
                        <input type="text" value="4" class="form-control" id="D500p" placeholder="课数">
                        <div class="input-group-addon">节</div>
                    </div>
                </div>
                <div class="form-group form-inline">
                    <label class="sr-only" for="D600p">Amount</label>
                    <div class="input-group">
                        <div class="input-group-addon">600 私教</div>
                        <input type="text" value="23" class="form-control" id="D600p" placeholder="课数">
                        <div class="input-group-addon">节</div>
                    </div>
                </div>
                <div class="form-group form-inline">
                    <label class="sr-only" for="D700p">Amount</label>
                    <div class="input-group">
                        <div class="input-group-addon">700 私教</div>
                        <input type="text" value="7" class="form-control" id="D700p" placeholder="课数">
                        <div class="input-group-addon">节</div>
                    </div>
                </div>
                <div class="form-group form-inline">
                    <label class="sr-only" for="D800p">Amount</label>
                    <div class="input-group">
                        <div class="input-group-addon">800 私教</div>
                        <input type="text" value="15" class="form-control" id="D800p" placeholder="课数">
                        <div class="input-group-addon">节</div>
                    </div>
                </div>
                <div class="form-group form-inline">
                    <label class="sr-only" for="Dreturn">Amount</label>
                    <div class="input-group">
                        <div class="input-group-addon">800 返费</div>
                        <input type="text" value="0" class="form-control" id="Dreturn" placeholder="节数">
                        <div class="input-group-addon">节</div>
                    </div>
                </div>
                <div class="form-group form-inline">
                    <label class="sr-only" for="DSmallClass">Amount</label>
                    <div class="input-group">
                        <div class="input-group-addon">小班团课</div>
                        <input type="text" value="60" class="form-control" id="DSmallClass" placeholder="课数">
                        <div class="input-group-addon">节</div>
                    </div>
                </div>
                <div class="form-group form-inline">
                    <label class="sr-only" for="DSmallClass_p">Amount</label>
                    <div class="input-group">
                        <div class="input-group-addon">小班私教</div>
                        <input type="text" value="40" class="form-control" id="DSmallClass_p" placeholder="课数（包括体验课）">
                        <div class="input-group-addon">节</div>
                    </div>
                </div>
                <div class="form-group form-inline">
                    <label class="sr-only" for="Dsales">Amount</label>
                    <div class="input-group">
                        <div class="input-group-addon">月度出单</div>
                        <input type="text" value="5" class="form-control" id="Dsales" placeholder="数量（体验+介绍）">
                        <div class="input-group-addon">张</div>
                    </div>
                </div>
                <div class="form-group form-inline">
                    <label class="sr-only" for="Dreduce">Amount</label>
                    <div class="input-group">
                        <div class="input-group-addon">月度减分</div>
                        <input type="text" value="1.175" class="form-control" id="Dreduce" placeholder="本月减分+上月背负">
                        <div class="input-group-addon">分</div>
                    </div>
                </div>
                <div class="form-group form-inline">
                    <label class="sr-only" for="Dreturn">Amount</label>
                    <div class="input-group">
                        <div class="input-group-addon">本月课费</div>
                        <div class="dropup">
                            <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu2"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                政策
                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
                                <li><a href="javascrpt:void(0)" onclick="handlePolicy(0);">无</a></li>
                                <li role="separator" class="divider"></li>
                                <li><a href="javascrpt:void(0)" onclick="handlePolicy(20);">每节减20元</a></li>
                                <li><a href="javascrpt:void(0)" onclick="handlePolicy(50);">每节减50元</a></li>
                            </ul>
                        </div>
                        <div class="input-group-addon">
                            <div id="Dpolicy">无</div>
                        </div>
                    </div>
                </div>
                <div class="form-group form-inline">
                    <div class="input-group">
                        <button type="button" onclick="calculate();" class="btn btn-primary">算工资</button>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="row">
                    <h1>计算结果</h1>
                    <div class="form-group form-inline">
                        <label class="sr-only" for="instructorName">name</label>
                        <div class="input-group">
                            <div class="input-group-addon"><span class="glyphicon glyphicon-user"></span>教练名称</div>
                            <button class="btn btn-primary form-control" id="instructorName" placeholder="姓名"></button>
                        </div>
                    </div>
                    <div class="form-group form-inline">
                        <label class="sr-only" for="instructorLevel">level</label>
                        <div class="input-group">
                            <div class="input-group-addon"><span class="glyphicon glyphicon-tree-deciduous"></span>教练级别
                            </div>
                            <button class="btn btn-success form-control" id="instructorLevel" placeholder="级别"></button>
                        </div>
                    </div>
                    <div class="form-group form-inline">
                        <label class="sr-only" for="instructorClassFee">ClassFee</label>
                        <div class="input-group">
                            <div class="input-group-addon"><span class="glyphicon glyphicon-usd"></span>月度课费
                            </div>
                            <button class="btn btn-warning form-control" id="instructorClassFee"
                                placeholder="课费"></button>
                        </div>
                    </div>
                    <div class="form-group form-inline">
                        <label class="sr-only" for="instructorContribute">Contribute</label>
                        <div class="input-group">
                            <div class="input-group-addon"><span class="glyphicon glyphicon-thumbs-up"></span>月度贡献
                            </div>
                            <button class="btn btn-info form-control" id="instructorContribute"
                                placeholder="贡献分"></button>
                        </div>
                    </div>
                    <div class="form-group form-inline">
                        <label class="sr-only" for="instructorReduce">reduce</label>
                        <div class="input-group">
                            <div class="input-group-addon"><span class="glyphicon glyphicon-thumbs-down"></span>月度减分
                            </div>
                            <button class="btn btn-danger form-control" id="instructorReduce" placeholder="减分"></button>
                        </div>
                    </div>
                    <div class="form-group form-inline">
                        <label class="sr-only" for="instructorCarry">carry</label>
                        <div class="input-group">
                            <div class="input-group-addon"><span class="glyphicon glyphicon-warning-sign"></span>下月背负
                            </div>
                            <button class="btn btn-danger form-control" id="instructorCarry" placeholder="背负"></button>
                        </div>
                    </div>
                    <div class="form-group form-inline">
                        <label class="sr-only" for="instructorNextPolicy">NextPolicy</label>
                        <div class="input-group">
                            <div class="input-group-addon"><span class="glyphicon glyphicon-bell"></span>下月政策
                            </div>
                            <button class="btn btn-danger form-control" id="instructorNextPolicy"
                                placeholder="下月政策"></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
    <!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
</body>

</html>
<script>
    $(document).ready(function () {
        var myDate = new Date();
        //获取当前年
        var year = myDate.getFullYear();
        //获取当前月
        var month = myDate.getMonth();
        $("#Ddate").html(year + "年" + month + "月");
    });
    // config
    // 私教课费标准
    var D400pFeeper = 200;
    var D500pFeeper = 250;
    var D600pFeeper = 300;
    var D700pFeeper = 300;
    var D800pFeeper = 300;
    // 小班课费标准
    var DSmallClassFeeper_1 = 150; // 高级教练小班团课课费标准
    var DSmallClassFeeper_2 = 120; // 初级教练小班团课课费标准
    var DSmallClass_pFeeper = 150; // 小班私教以及体验课课费标准
    // 贡献基本标
    var contributionClassAmount_1 = 100; // 高级教练贡献算法：每月最少上课数量标准
    var contributionClassAmount_2 = 150; // 初级教练贡献算法：每月最少上课数量标准
    var contributionSales = 4;
    // var
    var instructor_name;
    var instructor_level;
    var instructor_policy = 0;
    function handlePolicy(flag) {
        instructor_policy = flag;
        if (flag == 0) {
            $("#Dpolicy").html("无");
        } else {
            $("#Dpolicy").html("每节减" + flag + "元");
        }
    }
    function instructor(name, level) {
        instructor_name = name;
        instructor_level = level;
    }
    function calculate() {
        if(instructor_name==null){
            alert("请选择教练！");
            return 0;
        }
        $("#instructorName").html(instructor_name);
        var D400p_amount = parseInt($("#D400p").val());
        var D500p_amount = parseInt($("#D500p").val());
        var D600p_amount = parseInt($("#D600p").val());
        var D700p_amount = parseInt($("#D700p").val());
        var D800p_amount = parseInt($("#D800p").val());
        var Dreturn_amount = parseInt($("#Dreturn").val());
        var DSmallClass_amount = parseInt($("#DSmallClass").val());
        var DSmallClass_p_amount = parseInt($("#DSmallClass_p").val());
        var Dsales_amount = parseInt($("#Dsales").val());
        var Dreduce_amount = parseFloat($("#Dreduce").val());
        var contribution;
        if (instructor_level == 1) {
            $("#instructorLevel").html("高级教练");
            var fee = D400p_amount * (D400pFeeper - instructor_policy)
                + D500p_amount * (D500pFeeper - instructor_policy)
                + D600p_amount * (D600pFeeper - instructor_policy)
                + D700p_amount * (D700pFeeper - instructor_policy)
                + D800p_amount * (D800pFeeper - instructor_policy)
                + Dreturn_amount * 50
                + DSmallClass_amount * DSmallClassFeeper_1
                + DSmallClass_p_amount * DSmallClass_pFeeper;
            contribution = ((DSmallClass_amount + DSmallClass_p_amount) / contributionClassAmount_1 + Dsales_amount / contributionSales) / 2;
        } else if (instructor_level == 2) {
            $("#instructorLevel").html("初级教练");
            var fee = DSmallClass_amount * DSmallClassFeeper_2
                + DSmallClass_p_amount * DSmallClass_pFeeper;
            contribution = (DSmallClass_amount + DSmallClass_p_amount) / contributionClassAmount_2;
        }
        contribution = new Number(contribution).toFixed(3);
        $("#instructorContribute").html(contribution);
        $("#instructorReduce").html(Dreduce_amount);
        var carry = Dreduce_amount - 0.5;
        if (carry > 0) {
            $("#instructorCarry").html(carry);
            $("#instructorNextPolicy").html("每节课费减去20元");
        } else {
            $("#instructorCarry").html(0);
        }
        var sum = contribution - Dreduce_amount;
        if (sum < 0) {
            $("#instructorNextPolicy").html("每节课费减去50元");
        }
        $("#instructorClassFee").html((fee - Dreduce_amount * 1000) + "元");
    }
</script>